def heap [:10, 9,  8, 7, 6, 5, 4, 3, 2, 1, 10000, 10000,  10000, 10000:];
def count 10;
def heap_size 0;

def parent proc(i){
    (i - 1 ) // 2;
}

def left_child proc(i){
    2 * i + 1;
}

def right_child proc(i){
    2 * i + 2;
}

def getMin proc(heap){
    heap[0];
}

def swap_and_insert proc(heap, i, value){
    def child heap[i];
    def root heap[parent(i)];
    if child < root and i != 0 then {
        def temp heap[i];
        heap[i] := root;
        heap[parent(i)] := temp;

        swap_and_insert(heap, parent(i) , value);
    }
    else{
        heap[0];
    };
}

def insert proc(heap, data){
    if heap_size < 10  then{
        heap[9] := data;
        swap_and_insert(heap, 9, data);
        heap_size := heap_size + 1;
    };
}

def heapify proc(heap, index, size){
    def left left_child(index);
    def right right_child(index);
    def smallest index;
    if left <= size then {
        def left_value heap[left];
        def smallest_value heap[smallest];
        if left_value < smallest_value then{
            smallest := left;
        };
    };

    if right <= size then {
        def right_value heap[right];
        def smallest_value heap[smallest];
        if right_value < smallest_value then{
            smallest := right;
        };
    };

    if smallest != index then {
        def temp heap[index];
        def smallest_value heap[smallest];
        heap[index] := smallest_value;
        heap[smallest] := temp;
        heapify(heap, smallest, size);
    };
}

def build_heap proc(heap, size, counter){
    if counter >= 0 then {
        heapify(heap, counter, size);
        build_heap(heap, size, counter - 1);
    };
}

def deleteMin proc(heap, count){
    def min getMin(heap);
    def last heap[count - 1];
    heap[0] := last;
    count := count - 1;

    heapify(heap, 0, count);
    min;
}

def print_heap proc(heap, count){
    if count < 1 then {
        def root heap[0];
        println(root);
    }
    else{
        def element heap[count];
        println(element);
        print_heap(heap, count - 1);
    };
}

build_heap(heap, 10, 5);

print_heap(heap, count);

deleteMin(heap, count);

print_heap(heap, count);
